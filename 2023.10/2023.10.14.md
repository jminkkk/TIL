# 매개변수가 유효한지 검사하라

메서드와 생성자 대부분은 입력 매개변수의 값이 특정 조건을 만족하기를 바란다.

→ 이런 제약은 반드시 문서화해야 하며 **메서드 몸체가 시작되기 전에 검사해야** 한다.

**오류는 가능한 한 빨리 잡아야 한다는 원칙**

### 매개변수 검사를 제대로 하지 못했을 때 생기는 문제

1. 메서드가 수행되는 중간에 모호한 예외를 던지며 실패할 수 있다.
    1. 더 나쁜 상황은 메서드가 잘 수행되지만 잘못된 결과를 반환할 때다.
    2. 더 최악은 메서드는 잘 수행됐지만 어떤 객체를 이상한 상태로 만들어버려서 알 수 없는 시점에 머서드와는 관련 없는 오류가 발생할 때.
        1. **실패 원자성을 어기는 결과가** 발생할 수있다.

public과 protected 메서드는 매개변수 값이 잘못됐을 때 던지는 예외를 문서화해야 한다.

### 자바의 null 검사

```java
this.strategy = Objects.requireNonNull(strategy, "전략");
```

자바 7에 추가된 requireNonNull 메서드는 유연하고 사용하기도 편하니 더 상 Null 검사를 수동으로 하지 않아도 되며 예외 메시지도 지정할 수 있다.

또한, 입력을 그대로 반환하므로 값을 사용하는 동시에 null 검사를 수행할 수 있다.

### 공개되지 않은 메서드

공개되지 않은 메서드라면 패키지 제작자인 여러분이 메서드가 호출되는 상황을 통제할 수 있다.

→ 따라서 오직 유효한 값만이 메서드에 넘겨지리라는 것을 보장할 수 있고 그렇게 해야함

다시 말해 public이 아닌 메서드라면 단언문을 사용해 매개변수 유효성을 검증할 수 있다.

```java
private static void sort(long a[], int offset, int length) {
	assert a != null;
	assert offset >= 0 && offset <= a.length;
	assert length >= 0 && lenght <= a.length - offset;
// ... 
}
```
