# 공유 중인 가변 데이터는 동기화해 사용하라

**synchronized 키워드는** 해당 메서드나 블록을 한번에 한 스레드씩 수행하도록 보장

### 배타적 실행

객체를 하나의 일관된 상태에서 다른 일관된 상태로 변화

동기화를 제대로 사용하면 어떤 메서드도 이 객체의 상태가 일관되지 않은 순간을 볼 수 없을 것

- 동기화 없이는 한 스레드가 만든 변화를 다른 스레드에서 확인하지 못할 수도 있다.

### 스레드 통신

동기화는 안정적인 통신에 꼭 필요

공유 중인 가변 데이터를 비록 원자적으로 읽고 쓸 수 있을지라도 동기화에 실패하면 처참한 결과로 이어질 수 있다.

- 동기화하지 않으면 메인 스레드가 수정한 값을 백그라운드 스레드가 언제쯤에나 보게 될지 보증할 수 없다.

### 읽기, 쓰기

쓰기 메서드만 동기화해서는 충분하지 않다.

쓰기와 읽기 메서드 모두가 동기화되지 않으면 동작을 보장하지 않는다.

### volatile

volatile 한정자는 배타적 수행과는 상관없지만 항상 가장 최근에 기록된 값을 읽게 됨을 보장

volatile은 주의해서 사용해야 함

### 가변 데이터를 애초에 공유하지 말라

불변 데이터만 공유하거나 아무것도 공유하지 말자

가변 데이터는 단일 스레드에만 쓰도록 하자

한 스레드가 데이터를 다 수정한 후 다른 스레드에 공유할 때는 해당 객체에서 공유하는 부분만 동기화해도 된다.