# ORM, JPQL
### 통계 쿼리처럼 매우 복잡한 SQL은 어떻게?
+ JPA는 통계 쿼리 같이 복잡한 쿼리보다는 실시간 처리용 쿼리에 더 최적화
+ 상황에 따라 다르지만 정말 복잡한 통계 쿼리는 SQL을 직접 작성하는 것이 더 쉬운 경우가 많음
  + 따라서 JPA가 제공하는 네이티브 SQL을 사용하거나 마이바티스나 스프링의 JdbcTemplate 같은 SQL 매퍼 형태의 프레임워크를 혼용

### 마이바티스와 어떤 차이?
마이바티스나 스프링 JdbcTemplate을 보통 **SQL 매퍼**라 하는데 이름 그대로 객체와 SQL을 매핑

+ SQL과 매핑할 객체만 지정하면 반복되는 JDBC API 사용과 응답 결과를 객체로 매핑하는 일은 SQL 매퍼가 대신 처리
  + 개발자가 SQL을 직접 작성해야 하므로 SQL에 의존하는 개발
+ 반면에 ORM은 객체와 테이블을 매핑만 하면 ORM 프레임워크가 SQL을 만들어서 데이터베이스와 관 련된 처리를 해주므로 SQL에 의존하는 개발을 피할 수 있음

## JPQL
JPA는 SQL을 추상화한 JPQL이라는 객체지향 쿼리 언어를 제공

+ JPQL은 SQL과 문법이 거의 유사해서 SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN 등을 사용 가능
+ JPQL은 데이터베이스 테이블을 전혀 알지 못함
+ JPQL을 사용하려면 먼저 em.createQuery(JPQL, 반환 타입) 메소드를 실행해서 쿼리 객체를 생성한 후 쿼리 객체의 getResultList() 메소드를 호출

## SQL vs JPQL
+  JPQL은 엔티티 객체를 대상으로 쿼리
   + 클래스와 필드를 대상으로 쿼리

+ SQL은 데이터베이스 테이블을 대상으로 쿼리

