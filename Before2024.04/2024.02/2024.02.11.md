# 로드 밸런싱

### 로드 밸런싱이란?

로드 밸런싱은 애플리케이션을 지원하는 리소스 풀 전체에 네트워크 트래픽을 **균등하게 배포하는 방법**

- 최신 애플리케이션은 수백만 명의 사용자를 **동시에** 처리하고
- 정확한 여러 데이터를 빠르고 안정적인 방식으로 각 **사용자에게 반환**해야 함
- 많은 양의 트래픽을 처리하기 위해 대부분의 애플리케이션에는 데이터가 중복되는 리소스 서버가 많음
    - 로드 밸런서는 사용자와 서버 그룹 사이에 위치하며 보이지 않는 촉진자 역할을 하여 모든 리소스 서버가 동일하게 사용되도록 하는 디바이스

## 로드 밸런싱 알고리즘

로드 밸런싱 알고리즘은 크게 2가지 범주

### **정적 로드 밸런싱**

정적 로드 밸런싱 알고리즘은 고정된 규칙을 따르며 현재 **서버 상태와 무관**

- 라운드로빈
    - 서버에는 클라이언트에게 요청을 전송할 위치를 알려주는 IP 주소
    - IP 주소를 쉽게 기억하기 위해 도메인 이름 시스템은 웹 사이트 이름을 서버에 매핑
    - **라운드 로빈 방식에서는** **권한 있는 이름 서버가** 특수 하드웨어나 소프트웨어 대신 **로드 밸런싱을 수행**
    - 이름 서버는 서버 팜에 있는 **여러 서버의 IP 주소**를 차례대로 또는 **라운드 로빈 방식으로 반환**
- 가중 라운드로빈 방식
    - 가중치 기반 라운드 로빈 로드 밸런싱에서는 우선순위 또는 용량에 따라 **각 서버에 서로 다른 가중치**를 할당 가능
    - 가중치가 높은 서버는 이름 서버에서 들어오는 애플리케이션 **트래픽을 더 많이 수**신
- IP 해시 방식
    - IP 해시 방법에서 로드 밸런서는 **클라이언트 IP 주소에 대해 해싱**이라고 하는 수학적 계산을 수행
    - 클라이언트 IP 주소를 숫자로 변환한 다음 개별 서버에 매핑

### **동적 로드 밸런싱**

동적 로드 밸런싱 알고리즘은 **트래픽을 배포하기 전에 서버의 현재 상태를 검사**

- 최소 연결 방법
    - 연결은 클라이언트와 서버 간의 **개방형** 통신 채널
    - 클라이언트는 서버에 **첫 번째 요청을 전송**할 때 **서로 활성 연결을 인증하고 설정**
    - 최소 연결 방법에서 로드 밸런서는 **활성 연결이 가장 적은 서버를 확인**하고 해당 서버로 트래픽을 전송
        - 이 방법에서는 모든 연결에 모든 서버에 대해 동일한 처리 능력이 필요하다고 가정
- 가중치 기반 최소 연결 방법
    - 가중치 기반 최소 연결 알고리즘은 **일부 서버가** 다른 서버보다 **더 많은 활성 연결을 처리**할 수 있다고 가정
    - 따라서 각 서버에 **다른 가중치 또는 용량을 할당**할 수 있으며
        - 로드 밸런서는 용량별 연결이 **가장 적은 서버**로 새 클라이언트 요청을 전송
- 최소 응답 시간 방법
    - 응답 시간은 서버가 들어오는 요청을 처리하고 응답을 전송하는 데 걸리는 총 시간
    - 최소 응답 시간 방법은 **서버 응답 시간과 활성 연결을 결합하여 최상의 서버**를 결정
    - 로드 밸런서는 이 알고리즘을 사용하여 모든 사용자에게 더 빠른 서비스를 보장
- 리소스 기반 방법
    - 리소스 기반 방법에서 로드 밸런서는 현재 **서버 부하를 분석하여 트래픽을 배포**
    - 에이전트라고 하는 특수 소프트웨어는 각 서버에서 실행되며 컴퓨팅 용량 및 메모리와 같은 **서버 리소스의 사용량을 계산**
    - 그런 다음 로드 밸런서는 해당 서버에 트래픽을 배포하기 전에 에이전트에 충분한 여유 리소스가 있는지 확인