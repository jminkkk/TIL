# MySQL 아키텍처
> 복습...!! 패스트 캠퍼스 강의를 보고 정리함!!

## MySQL의 전체 구조
MySQL 서버는 크게 MySQL 엔진과 스토리지 엔진으로 구분

# MySQL 엔진
## 쿼리 파서 -> 전처리기 -> 옵티마이저 -> 쿼리 실행기로 구성
### 쿼리파서
+ SQL을 파싱하여 **Syntax Tree를** 만듬
+ 이 과정에서 **문법 오류 검사가** 이루어짐

### 전처리기
+ 쿼리파서에서 만든 Tree를 바탕으로 전처리 시작
+ 테이블이나 컬럼 존재 여부, 접근권한 등 **Semantic 오류** 검사

### 쿼리파서와 전처리기의 특징
+ 쿼리파서, 전처리기는 컴파일 과정과 매우 유사
+ 하지만 SQL은 프로그래밍 언어처럼 컴파일 타임때 검증 할 수 없어 매번 구문 평가를 진행

### 옵티마이저
+ **쿼리를 처리**하기 위한 여러 방법들을 만들고, 각 방법들의 비용정보와 테이블의 통계정보를 이용해 비용을 산정
+ 테이블 순서, 불필요한 조건 제거, 통계정보를 바탕으로 전략을 결정 (실행 계획 수립)
+ 옵티마이저가 **어떤 전략을 결정하느냐에 따라 성능이 많이 달라진다**.
+ 가끔씩 성능이 나쁜 판단을 해 개발자가 힌트를 사용해 도움을 줄 수 있다.

### 쿼리 실행기
+ 핸들러 API를 통해 스토리지 엔진에 접근

# 스토리지 엔진
+ 디스크에서 데이터를 가져오거나 저장하는 역할
+ MySQL 스토리지 엔진은 플러그인 형태로 Handler API만 맞춘다면 직접 구현해서 사용할 수 있다.
+ InnoDB, MyIsam 등 여러개의 스토리지 엔진이 존재
+ 8.0대 부터는 InnoDB 엔진을 디폴트